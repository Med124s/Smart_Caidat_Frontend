<ng-container>
  <!-- ‚úÖ Checkbox s√©lection -->
  <td class="text-center">
    <input
      type="checkbox"
      [checked]="isSelected$ | async"
      (change)="toggleSelection($event)"
      class="checkbox checkbox-sm" />
  </td>

  <!-- üè∑Ô∏è Titre -->
  <td>{{ request.type | prettyType }}</td>
  <td>{{ request.citizenPublicId }}</td>
  <td>{{ request.motif }}</td>
  <td>
    {{ request.description.length > 50 ? (request.description | slice: 0:50) + '...' : request.description }}
  </td>
  <td>{{ request.creatorPublicId }}</td>
  <!-- <td>{{ request.status. }}</td> -->
  <td>
    <span
      [ngClass]="{
        'bg-green-100 text-green-800': request.status?.value === 'APPROVED',
        'bg-red-100 text-red-800': request.status?.value === 'REJECTED',
        'bg-yellow-100 text-yellow-800': request.status?.value === 'PENDING',
      }"
      class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium">
      {{
        request.status?.value === 'APPROVED'
          ? 'Approuv√©e'
          : request.status?.value === 'REJECTED'
          ? 'Rejet√©e'
          : request.status?.value === 'PENDING'
          ? 'En attente'
          : 'En attente'
      }}
    </span>
  </td>

  <!-- ‚úÖ Action -->
  <td *ngIf="canChangeStatus" class="relative">
    <!-- Ic√¥ne pour ouvrir/fermer le menu -->
    <button (click)="toggleMenu(request.publicId)" class="rounded p-1 hover:bg-gray-200">‚öôÔ∏è</button>

    <!-- Menu dropdown -->
    <div
      *ngIf="openMenuId === request.publicId"
      class="absolute right-0 z-10 mt-2 w-36 rounded-md border bg-white shadow-lg">
      <button
        class="block w-full px-3 py-1 text-left text-sm hover:bg-green-100"
        (click)="updateStatus(request, RequestStatus.APPROVED)">
        ‚úÖ Approuver
      </button>

      <button
        class="block w-full px-3 py-1 text-left text-sm hover:bg-red-100"
        (click)="updateStatus(request, RequestStatus.REJECTED)">
        ‚ùå Rejeter
      </button>

      <button
        class="block w-full px-3 py-1 text-left text-sm hover:bg-yellow-100"
        (click)="updateStatus(request, RequestStatus.PENDING)">
        ‚è≥ En attente
      </button>
    </div>
  </td>

  <td>{{ request.creationDate | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
  <td>{{ request.validationDate | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
  
  <td *ngIf="request.certificateUrl">
    <a [href]="request.certificateUrl" target="_blank" class="text-blue-500 hover:underline">
      T√©l√©charger le certificat
    </a>
  </td>

  <!-- üìÖ Date de cr√©ation -->
  <!-- <td>
    {{ request.creationDate ? (request.creationDate | date: 'dd/MM/yyyy') : '' }}
  </td> -->

  <!-- üë§ Auteur -->
  <!-- <td>{{ request.ownerType }} - {{ request.ownerPublicId.substr(1, 5) }}</td> -->

  <!-- Colonne Propri√©taire -->
  <!-- <td>
    <span *ngIf="request.ownerType === 'CITIZEN'"> {{ request.ownerFirstName }} {{ request.ownerLastName }} </span>
  </td> -->

  <!-- üìä Statut -->
  <!-- <td>{{ request.status }}</td> -->
  <!-- Colonne Status -->
  <!-- <td>
    <span
      [ngClass]="{
        'bg-green-100 text-green-800': request.status === 'requestD',
        'bg-blue-100 text-blue-800': request.status === 'ACTIVE',
        'bg-yellow-100 text-yellow-800': request.status === 'ON_HOLD',
        'bg-red-100 text-red-800': request.status === 'DELETED',
      }"
      class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium">
      {{ request.status }}
    </span>
  </td> -->

  <!-- üóÑÔ∏è Lieu -->
  <!-- <td>{{ request.storageLocation }}</td> -->
  <!-- Colonne Lieu de stockage -->

  <!-- üìé document -->
  <!-- <td>
    <button (click)="openDocuments()" class="text-xs text-blue-500 hover:underline">
      Voir documents ({{ request.documents.length || 0 }})
    </button>
  </td> -->

  <!-- Colonne Documents -->

  <!-- ‚ö° Actions -->
  <!-- <td class="space-x-2 text-center">
    <button class="text-xs text-blue-500 hover:underline" (click)="editrequest(request)">Modifier</button>
    <button class="text-xs text-red-500 hover:underline" (click)="deleterequest(request.publicId)">Supprimer</button>
  </td> -->
</ng-container>
